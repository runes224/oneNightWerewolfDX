(function(e){function t(t){for(var s,r,o=t[0],c=t[1],l=t[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},i={app:0},a=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/one_night_jinro_dx/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var s=n("8a23"),i=n.n(s);i.a},"284c":function(e,t,n){"use strict";var s=n("ea17"),i=n.n(s);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("div",[n("v-app-bar",{attrs:{color:"gray accent-4",dark:""}},[n("v-toolbar-title",[e._v("ワンナイト人狼DX")]),n("v-spacer"),e.nameFlag?n("div",{staticStyle:{display:"inline-flex","padding-bottom":"0"}},[n("p",[e._v("ログインユーザ：")]),n("p",[e._v(e._s(e.users.length)+"人")])]):e._e()],1)],1),n("v-container",[n("div",{attrs:{id:"app"}},[e.isConnected?e._e():n("button",{on:{click:e.connect}},[e._v("接続")]),e.isConnected?n("div",[e.nameFlag?e._e():n("div",{staticClass:"register-name"},[n("v-form",{ref:"register_name_form",staticStyle:{width:"15rem"}},[n("v-text-field",{attrs:{label:"名前を入力してください",rules:[e.required]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("v-btn",{staticStyle:{"margin-top":"0.8rem","margin-left":"1rem"},on:{click:e.registerName}},[e._v("送信")])],1),"start"==e.status?n("div",[n("div",{staticClass:"margin_1"},[e._v("残り"+e._s(e.remainCounter)+"枚、役職を増やしてください。")]),e._l(e.roles,(function(t){return n("div",{key:t.name,staticClass:"counter-area"},[n("div",{staticClass:"role-name"},[e._v(e._s(t.name)+"：")]),n("number-input-spinner",{attrs:{min:0,max:10,step:1,integerOnly:!0},model:{value:t.number,callback:function(n){e.$set(t,"number",n)},expression:"role.number"}})],1)})),n("v-btn",{staticClass:"margin_1",attrs:{color:"primary"},on:{click:e.startGame}},[e._v("ゲーム開始")])],2):e._e(),"start"!=e.status&&e.nameFlag?n("div",{staticClass:"direction-column"},[n("Timer",{attrs:{seccond:e.nightPeriodSecond},on:{startVoting:e.startVotingParent}}),n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{scrollable:"","max-width":"25rem"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[n("v-btn",e._g({attrs:{color:"red lighten-2",dark:""}},s),[e._v("投票する")])]}}],null,!1,842793146),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v("投票する相手を選択してください")]),n("v-divider"),n("v-card-text",{staticStyle:{height:"300px"}},[n("v-radio-group",{attrs:{column:""},model:{value:e.votedUser,callback:function(t){e.votedUser=t},expression:"votedUser"}},e._l(e.users,(function(e){return n("div",{key:e},[n("v-radio",{attrs:{label:"user",value:"user"}})],1)})),0)],1),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("キャンセル")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("送信")])],1)],1)],1)],1),n("div",{attrs:{id:"inside-cards"}},e._l(e.insideCards,(function(t){return n("div",{key:t.name,staticClass:"direction-column card-area",on:{click:function(t){return e.nightActionInside()}}},[n("div",{staticClass:"card",class:t.design})])})),0),n("v-divider"),n("div",{attrs:{id:"outside-cards"}},e._l(e.outsideCards,(function(t){return n("div",{key:t.name,staticClass:"direction-column card-area",on:{click:function(n){return e.nightActionOutside(t)}}},[n("div",{staticClass:"card",class:t.design}),e._v(" "+e._s(t.name)+" ")])})),0)],1):e._e(),e.nameFlag?n("div",{staticClass:"kakomi"},e._l(e.messages,(function(t){return n("ul",{key:t,staticStyle:{"list-style":"none"}},[n("li",[e._v(e._s(t))]),n("v-divider")],1)})),0):e._e()]):e._e()])])],1)},a=[],r=(n("a4d3"),n("e01a"),n("4de4"),n("4160"),n("d81d"),n("a434"),n("b0c0"),n("4fad"),n("ac1f"),n("466d"),n("159b"),n("3835")),o=n("b85c"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"timer"}},[n("div",{staticClass:"timer",staticStyle:{display:"flex"}},[n("div",{staticClass:"time"},[e._v(e._s(e.msg))]),e.startVotingFlag?e._e():n("div",[e._v("残り時間："+e._s(e.formatTime))])])])},l=[],u=(n("d3b7"),n("25f0"),{name:"timer",props:["seccond"],data:function(){return{min:0,sec:this.seccond,timerObj:null,msg:"",doneNightActionFlag:!1,startVotingFlag:!1}},methods:{count:function(){if(this.sec<=0&&this.min>=1)this.min--,this.sec=59;else if(this.sec<=0&&this.min<=0){if(1==this.doneNightActionFlag)return clearTimeout(this.timerObj),this.startVotingFlag=!0,this.msg="議論の時間が終わりました。投票をしてください。",this.$emit("startVoting"),!1;this.sec=5,this.msg="夜が明けました。議論を始めてください。",this.doneNightActionFlag=!0}else this.sec--},start:function(){var e=this;this.timerObj=setInterval((function(){e.count()}),1e3)},stop:function(){clearInterval(this.timerObj)}},watch:{second:{immediate:!0,handler:function(){this.msg="夜の行動を行ってください。",this.start()}}},computed:{formatTime:function(){var e=[this.min.toString(),this.sec.toString()].map((function(e){return e.length<2?"0"+e:e}));return e[0]+":"+e[1]}}}),d=u,m=(n("284c"),n("2877")),f=Object(m["a"])(d,c,l,!1,null,"d544b2f2",null),g=f.exports,h={components:{Timer:g},name:"App",data:function(){return{name:"",role:"",nameFlag:!1,inputMessage:"",connection:null,status:"",doneNightActionFlag:!1,dialog:!1,votedUser:"",nightPeriodSecond:0,messages:[],users:[],insideCards:[],outsideCards:[],roles:[{name:"村人",number:0,description:"狼の嘘を見破りましょう"},{name:"人狼",number:2,description:"村人を欺きましょう"},{name:"占い師",number:3,description:"誰かのカードか余ったカードを確認できます"},{name:"怪盗",number:1,description:"誰かのカードと交換できます"},{name:"軍人",number:0,description:"村人よりちょっとだけ強いです"},{name:"狂人",number:0,description:"人狼の勝利があなたの勝利です"}],required:function(e){return!!e||"必ず入力してください"}}},computed:{isConnected:function(){return null!==this.ws},remainCounter:function(){var e,t=0,n=Object(o["a"])(this.roles);try{for(n.s();!(e=n.n()).done;){var s=e.value;t+=s.number}}catch(i){n.e(i)}finally{n.f()}return this.users.length-t+2}},methods:{registerName:function(){if(this.$refs.register_name_form.validate()){var e={action:"registerName",data:this.name};this.nameFlag=!0,this.status="start",this.connection.send(JSON.stringify(e))}},startGame:function(){var e={action:"startGame",roles:this.roles,users:this.users};this.connection.send(JSON.stringify(e))},nightActionInside:function(){if("占い師"==this.role&&0==this.doneNightActionFlag)for(var e=0;e<2;e++){var t=this.insideCards[e];t.design=t.role,this.insideCards.splice(e,1,t),this.messages.push("中央の伏せカード"+(e+1)+":"+t.role)}this.doneNightActionFlag=!0},nightActionOutside:function(e){var t=this;if(!this.doneNightActionFlag){if("占い師"==this.role)e.design=e.role,this.outsideCards.splice(e.num,1,e),this.messages.push(e.name+"さんのカードは"+e.role+"でした");else if("怪盗"==this.role){e.design=e.role;var n=this.outsideCards.filter((function(e){return e.name===t.name})),s=n[0];this.role=e.role,s.name=e.name,e.name=this.name,this.outsideCards.splice(s.num,1,e),this.outsideCards.splice(e.num,1,s),this.messages.push(s.name+"さんのカード（"+e.role+"）と交換しました")}this.doneNightActionFlag=!0}},startVotingParent:function(){this.status="voting"}},created:function(){var e=this;console.log("Starting connection to WebSocket Server"),this.connection=new WebSocket("wss://oy4l1o06be.execute-api.ap-northeast-1.amazonaws.com/prod"),this.connection.onmessage=function(t){switch(JSON.parse(t.data).type){case"join":e.messages.push(JSON.parse(t.data).message+"が入室しました。"),e.users.push(JSON.parse(t.data).message);break;case"message":e.messages.push(JSON.parse(t.data).message);break;case"roles":console.log(JSON.parse(t.data));var n=JSON.parse(t.data).userRoles;e.role=n[e.name],e.messages=[],e.messages.push("あなたの役職は"+e.role+"です。"),e.roles.forEach((function(t){t.name===e.role&&e.messages.push(t.description)}));var s=0;console.log(n),Object.entries(n).map((function(t){var n=Object(r["a"])(t,2),i=n[0],a=n[1],o={};o=i==e.name?{name:i,role:a,design:a,num:s}:{name:i,role:a,design:"back",num:s},o.name.match(/^notAssigned/)?e.insideCards.push(o):e.outsideCards.push(o),s++})),"人狼"==e.role&&e.outsideCards.forEach((function(t){"人狼"===t.role&&t.name!==e.name&&(t.design=t.role,e.outsideCards.splice(t.num,1,t),e.messages.push(t.name+"さんも人狼です"))})),e.status="morning",e.nightPeriodSecond=10;break;default:console.log(JSON.parse(t.data)),e.messages.push("予期せぬデータを受信しました")}},this.connection.onopen=function(e){console.log(e),console.log("Successfully connected to the echo websocket server...")}}},p=h,v=(n("034f"),n("6544")),b=n.n(v),_=n("7496"),y=n("40dc"),C=n("8336"),k=n("b0af"),O=n("99d9"),S=n("a523"),x=n("169a"),V=n("ce7e"),w=n("4bd4"),j=n("67b6"),N=n("43a6"),F=n("0fd9"),A=n("2fa4"),T=n("8654"),P=n("2a7f"),J=Object(m["a"])(p,i,a,!1,null,null,null),$=J.exports;b()(J,{VApp:_["a"],VAppBar:y["a"],VBtn:C["a"],VCard:k["a"],VCardActions:O["a"],VCardText:O["b"],VCardTitle:O["c"],VContainer:S["a"],VDialog:x["a"],VDivider:V["a"],VForm:w["a"],VRadio:j["a"],VRadioGroup:N["a"],VRow:F["a"],VSpacer:A["a"],VTextField:T["a"],VToolbarTitle:P["a"]});var M=n("f309");s["a"].use(M["a"]);var E=new M["a"]({}),G=n("1fb0"),I=n.n(G);s["a"].config.productionTip=!1,s["a"].component("number-input-spinner",I.a),new s["a"]({vuetify:E,render:function(e){return e($)}}).$mount("#app")},"8a23":function(e,t,n){},ea17:function(e,t,n){}});
//# sourceMappingURL=app.55d63267.js.map